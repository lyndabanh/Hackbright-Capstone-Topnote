{% extends 'base.html' %}

{% block title %}{{ wine.title }} - Details{% endblock %}

{% block body %}
<a href="/home">Home</a>
<div></div>
<h1>{{ wine.title }}</h1>

<p>
  <div>Designation: {{ wine.designation }}</div>
  <div>Varietal: {{ wine.variety }}</div>
  <div>Region 1: {{ wine.region_1 }}</div>
  <div>Region 2: {{ wine.region_2 }}</div>
  <div>Province: {{ wine.province }}</div>
  <div>Country: {{ wine.country }}</div>
  <div>Winery: {{ wine.winery }}</div>
</p>
<p>
  <div>Description: {{ wine.description }}</div>
</p>

{% if 'user_id' in session %}
  {% if current_users_rating %}
  <p>You've already rated this wine. You may update your rating below:</p>
  <form action="/wines/{{ wine.wine_id }}/ratings" method="POST">
    <p>
      Update rating<input type="number" min="0" max=5 name="new_rating">
    </p>

    <p>
      <input type="submit">
    </p>
  </form>
  {% else %}
    <form action="/wines/{{ wine.wine_id }}/ratings" method="POST">
      <p>
        Rating<input type="number" min="0" max=5 name="rating">
      </p>

      <p>
        <input type="submit">
      </p>
    </form>
  {% endif %}
{% endif %}

{% if not 'user_id' in session %}
  <p>
    <div>Log in to rate this wine!</div> 
    <div>(Login on homepage)</div>
  </p>
{% endif %}

<p>TODO: JS event listener -- onclick for user to like/favorite this wine</p>

{% endblock %}